# Radicale IDP Deployment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control - it contains secrets!

# ============================================================================
# CRITICAL: Bearer Token for Privacy API Authentication
# ============================================================================
# This token is used for Bearer token authentication on all privacy API
# endpoints (/privacy/*). The same token must be set in both services.
#
# SECURITY WARNING:
# - Use a strong, randomly generated token for production
# - At least 32 characters recommended
# - Generate with: openssl rand -hex 32
# - Keep this value secret and never commit it to version control
#
# Example: RADICALE_TOKEN=abc123xyz789def456ghi789jkl012mno
RADICALE_TOKEN=secret-token

# ============================================================================
# JWT Secret for Web App Authentication
# ============================================================================
# Used by the React web application to sign JWT tokens for session
# authentication. This is separate from the Radicale Bearer token.
#
# SECURITY WARNING:
# - Use a strong, randomly generated token for production
# - At least 32 characters recommended
# - Generate with: openssl rand -hex 32
# - Never commit to version control
#
# Example: JWT_SECRET=xyz789def456ghi789jkl012mno345pqr
JWT_SECRET=change-this-to-a-secure-random-string

# ============================================================================
# SSL Configuration Mode
# ============================================================================
# Set to "true" for local development (self-signed certificates)
# Set to "false" or comment out for production (Let's Encrypt certificates)
SELF_SIGNED_SSL=true

# ============================================================================
# Domain Configuration for SSL/TLS Certificates
# ============================================================================
# Required for Let's Encrypt SSL certificate setup
# These are used by the SSL setup script (scripts/setup-ssl.sh)

# Your domain name (must point to this server's IP address)
DOMAIN=your-domain.com

# Email for Let's Encrypt certificate notifications
EMAIL=admin@your-domain.com

# ============================================================================
# Default User Password for Zip File Initialization
# ============================================================================
# Password used for all users created from zip files in default-data/
# during initial container startup.
#
# SECURITY WARNING:
# - This password applies to ALL users created from zip files
# - Change this BEFORE deploying or creating users
# - Use a strong password for production
# - Default "password" is INSECURE and only for local development
# - Avoid shell special characters (!, $, `, \, ", ') to prevent escaping issues
#
# Generate a strong password with:
#   openssl rand -base64 16 | tr -d '/+='
#
# Good example: DEFAULT_USER_PASSWORD=Xy9K8mNpQ2vL7wRt
# Avoid: Passwords with !, $, or other shell special characters
#
DEFAULT_USER_PASSWORD=password

# ============================================================================
# AWS SES (Simple Email Service) - For Sending OTP Emails
# ============================================================================
# Required for production if MOCK_EMAIL is not set to true
# Set these to empty strings or comment out to use mock mode for testing

# AWS Region where your SES is configured
# Examples: us-east-1, us-west-2, eu-west-1
AWS_REGION=us-east-1

# AWS IAM credentials with SES permission
# Never commit these to version control!
# Use IAM roles in production instead of credentials
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# Email sender configuration
# EMAIL_FROM must be verified in AWS SES
EMAIL_FROM=noreply@example.com
EMAIL_FROM_NAME=Radicale IDP

# ============================================================================
# AWS SNS (Simple Notification Service) - For Sending OTP SMS
# ============================================================================
# Required for production
# Same AWS credentials as SES are used for SNS

# ============================================================================
# Web Application Database
# ============================================================================
# SQLite database filename for the React app
# This is stored in the web_data Docker volume
# Default location: /data/local.db (inside container)
DB_FILE_NAME=/data/local.db

# ============================================================================
# Radicale Server Configuration
# ============================================================================
# The web app communicates with Radicale via this URL
# For Docker Compose: use the service name 'radicale' as hostname
# The internal URL is: http://radicale:5232
#
# This is automatically configured in docker-compose.yml
# Only change if using a different Radicale deployment
# RADICALE_URL=http://radicale:5232

# ============================================================================
# OTP Delivery Method - Mock Mode for Development
# ============================================================================
# For development/testing without AWS credentials:
# Set these to "true" to log OTP codes to console instead of sending via AWS
#
# For production:
# Comment these out or set to "false" and configure AWS credentials above

MOCK_EMAIL=true
MOCK_SMS=true

# ============================================================================
# Web Application Templates Configuration
# ============================================================================
# Enable or disable template functionality in the web application
ENABLE_TEMPLATES=true

# Default template to use in the web application
# Examples: a, b, c, d (depending on available templates)
DEFAULT_TEMPLATE=d

# ============================================================================
# Optional: Radicale Server Configuration
# ============================================================================
# If using environment variables to configure Radicale instead of config file:
#
# RADICALE_AUTH_TYPE=none
# RADICALE_RIGHTS_TYPE=authenticated
# RADICALE_STORAGE_FILESYSTEM_FOLDER=/var/lib/radicale/collections
# RADICALE_LOGGING_LEVEL=info
# RADICALE_PRIVACY_DATABASE_PATH=/var/lib/radicale/privacy.db
# RADICALE_PRIVACY_DATABASE_LOGGING=false
#
# See radicale/config.py for all available environment variables

# ============================================================================
# Security Best Practices
# ============================================================================
#
# 1. Token Generation:
#    $ openssl rand -hex 32
#    $ python3 -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 2. For Production:
#    - Use AWS IAM roles instead of hardcoded credentials
#    - Store secrets in a secrets management service (e.g., HashiCorp Vault)
#    - Use strong, unique tokens
#    - Rotate tokens periodically
#    - Enable HTTPS/SSL with a reverse proxy
#    - Use proper authentication (not 'auth = none')
#
# 3. Environment Variables:
#    - Never commit .env to version control
#    - Use docker secrets for Docker Swarm
#    - Use environment variables injection for Kubernetes
#    - Restrict file permissions: chmod 600 .env
#
# 4. Database:
#    - Regularly backup both privacy.db and local.db
#    - Consider encrypting database files at rest
#    - Monitor database logs for suspicious activity
